{"ast":null,"code":"var _jsxFileName = \"/Users/heatherschechter/Desktop/techTalentPipeline/frontend/ttp_app/src/components/UserStocks.js\";\nimport React from 'react';\nimport { List, Container, Grid, Header } from 'semantic-ui-react';\nimport { formatter } from '../constants/formatCurrency';\n\nclass UserStocks extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this._isMounted = false;\n    this.state = {\n      userStocks: [],\n      summedArray: []\n    };\n\n    this.buildUserStockObject = () => {\n      //create a simple object --> {ticker: number of shares}\n      const tickersAndQtyObject = {};\n      this.state.userStocks.forEach(el => {\n        if (tickersAndQtyObject[el.ticker]) {\n          tickersAndQtyObject[el.ticker] += el.num_shares;\n        } else {\n          tickersAndQtyObject[el.ticker] = el.num_shares;\n        }\n      }); //convert the object back to an array with summed number of shares owned by that user \n\n      const summedArray = Object.entries(tickersAndQtyObject);\n      this.setState({\n        summedArray\n      });\n      this.portfolioTotal(summedArray);\n    };\n\n    this.portfolioTotal = summedArray => {\n      let currentPriceArray = [];\n      [...summedArray].forEach(el => {\n        currentPriceArray.push(this.props.currentPrices[el[0]].lastPrice * el[1]);\n      });\n      let total = currentPriceArray.length === 0 ? 0 : currentPriceArray.reduce((acc, cv) => acc + cv);\n      this.props.totalPortfolioValue(total);\n    };\n  }\n\n  componentDidMount() {\n    fetch(`http://localhost:3000/api/v1/users/${this.props.user.id}/transactions`).then(resp => resp.json()).then(userStocks => this.setState({\n      userStocks\n    }, () => this.buildUserStockObject()));\n  }\n\n  //update user's list of stocks when new stocks are purchased \n  componentDidUpdate(prevProps, prevState) {\n    if (this.state !== prevState) {\n      fetch(`http://localhost:3000/api/v1/users/${this.props.user.id}/transactions`).then(resp => resp.json()).then(userStocks => this.setState({\n        userStocks\n      }, () => this.buildUserStockObject()));\n    }\n  }\n\n  render() {\n    //map through user's stocks and count and return array containing components to render - each component contains a) ticker, b) # shares, and c) qty * current price \n    const stockList = this.state.summedArray.map((el, index) => {\n      //change color of text based on lastPrice and PreviousClose --> if lastPrice > PrevClose then green text, if lastPrice < prevClose red text, otherwise gray text\n      let currentPrice;\n\n      if (this.props.currentPrices[el[0]].lastPrice > this.props.currentPrices[el[0]].prevClose) {\n        currentPrice = React.createElement(\"p\", {\n          style: {\n            color: 'green'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59\n          },\n          __self: this\n        }, formatter.format(this.props.currentPrices[el[0]].lastPrice * el[1]));\n      } else if (this.props.currentPrices[el[0]].lastPrice === this.props.currentPrices[el[0]].prevClose) {\n        currentPrice = React.createElement(\"p\", {\n          style: {\n            color: 'gray'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61\n          },\n          __self: this\n        }, formatter.format(this.props.currentPrices[el[0]].lastPrice * el[1]));\n      } else {\n        currentPrice = React.createElement(\"p\", {\n          style: {\n            color: 'red'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63\n          },\n          __self: this\n        }, formatter.format(this.props.currentPrices[el[0]].lastPrice * el[1]));\n      }\n\n      return React.createElement(List.Item, {\n        key: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        columns: 3,\n        divided: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, React.createElement(Grid.Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(Grid.Column, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(Header, {\n        as: \"h4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, el[0])), React.createElement(Grid.Column, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, el[1], \" Shares\"), React.createElement(Grid.Column, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, currentPrice))));\n    }); //this is the render() return \n\n    return React.createElement(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(List, {\n      divided: true,\n      relaxed: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, stockList));\n  }\n\n}\n\n;\nexport default UserStocks;","map":{"version":3,"sources":["/Users/heatherschechter/Desktop/techTalentPipeline/frontend/ttp_app/src/components/UserStocks.js"],"names":["React","List","Container","Grid","Header","formatter","UserStocks","Component","_isMounted","state","userStocks","summedArray","buildUserStockObject","tickersAndQtyObject","forEach","el","ticker","num_shares","Object","entries","setState","portfolioTotal","currentPriceArray","push","props","currentPrices","lastPrice","total","length","reduce","acc","cv","totalPortfolioValue","componentDidMount","fetch","user","id","then","resp","json","componentDidUpdate","prevProps","prevState","render","stockList","map","index","currentPrice","prevClose","color","format"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { List, Container, Grid, Header } from 'semantic-ui-react';\nimport { formatter } from '../constants/formatCurrency';\n\nclass UserStocks extends React.Component {\n  _isMounted = false;\n\n  state = {\n    userStocks: [],\n    summedArray: []\n  }\n\n  componentDidMount(){\n    fetch(`http://localhost:3000/api/v1/users/${this.props.user.id}/transactions`)\n    .then(resp => resp.json())\n    .then(userStocks => this.setState({ userStocks }, () => this.buildUserStockObject()))\n  };\n\n  //update user's list of stocks when new stocks are purchased \n  componentDidUpdate(prevProps, prevState) { \n    if(this.state !== prevState) {\n      fetch(`http://localhost:3000/api/v1/users/${this.props.user.id}/transactions`)\n      .then(resp => resp.json())\n      .then(userStocks => this.setState({ userStocks }, () => this.buildUserStockObject()))\n    }\n  }\n\n  buildUserStockObject = () => {\n    //create a simple object --> {ticker: number of shares}\n    const tickersAndQtyObject = {};\n    this.state.userStocks.forEach(el => {\n      if(tickersAndQtyObject[el.ticker]){\n        tickersAndQtyObject[el.ticker] += el.num_shares\n      } else {\n        tickersAndQtyObject[el.ticker] = el.num_shares;\n      }\n    })\n    //convert the object back to an array with summed number of shares owned by that user \n    const summedArray = Object.entries(tickersAndQtyObject)\n    this.setState({ summedArray });\n    this.portfolioTotal(summedArray);\n  }\n\n  portfolioTotal = (summedArray) => {\n    let currentPriceArray = [];\n    [...summedArray].forEach(el => {\n      currentPriceArray.push(this.props.currentPrices[el[0]].lastPrice * el[1])\n    })\n    let total = currentPriceArray.length === 0 ? 0 : currentPriceArray.reduce((acc, cv) => acc + cv)\n    this.props.totalPortfolioValue(total)\n  }\n\n  render(){\n    //map through user's stocks and count and return array containing components to render - each component contains a) ticker, b) # shares, and c) qty * current price \n    const stockList = this.state.summedArray.map((el, index) => {\n      //change color of text based on lastPrice and PreviousClose --> if lastPrice > PrevClose then green text, if lastPrice < prevClose red text, otherwise gray text\n      let currentPrice;\n      if(this.props.currentPrices[el[0]].lastPrice > this.props.currentPrices[el[0]].prevClose) {\n        currentPrice = <p style={{ color: 'green' }}>{formatter.format(this.props.currentPrices[el[0]].lastPrice * el[1])}</p>\n      } else if (this.props.currentPrices[el[0]].lastPrice === this.props.currentPrices[el[0]].prevClose) {\n        currentPrice = <p style={{ color: 'gray' }}>{formatter.format(this.props.currentPrices[el[0]].lastPrice * el[1])}</p>\n      } else {\n        currentPrice = <p style={{ color: 'red' }}>{formatter.format(this.props.currentPrices[el[0]].lastPrice * el[1])}</p>\n      }\n      return (\n        <List.Item key={index}>\n        <Grid columns={3} divided>\n          <Grid.Row>\n            <Grid.Column>\n              <Header as='h4'>{el[0]}</Header>\n            </Grid.Column>\n            <Grid.Column>\n              {el[1]} Shares\n            </Grid.Column>\n            <Grid.Column>\n              {currentPrice}\n            </Grid.Column>\n          </Grid.Row>\n        </Grid>\n        </List.Item>\n      )\n    });\n\n    //this is the render() return \n    return (\n      <Container>\n        {/* render list of user's stocks */}\n        <List divided relaxed> \n          {stockList}\n        </List>\n      </Container>\n    )\n  }\n\n};\n\nexport default UserStocks;\n"]},"metadata":{},"sourceType":"module"}